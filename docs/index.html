<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Conversion of ICNARC XML to OMOP CDM 6 • icnarc2omop</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Conversion of ICNARC XML to OMOP CDM 6">
<meta property="og:description" content="This package converts ICNARC XML to the OMOP CDM 6.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">icnarc2omop</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/CC-HIC/icnarc2omop">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<hr>
<p>output: github_document editor_options: chunk_output_type: console —</p>
<!-- README.md is generated from README.Rmd. Please edit that file -->
<p><code>{r, include = FALSE} knitr::opts_chunk$set(   collapse = TRUE,   comment = "#&gt;",   fig.path = "man/figures/README-",   out.width = "100%" ) options(tibble.print_min = 5, tibble.print_max = 5)</code></p>
<!-- badges: start -->

<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The role of this package is to help convert the most elementary components of the ICNARC XML to OMOP CDM. This facilitates the set up of an OMOP style CDM, acting as a base from which users can then populate with data from their local EHR. This was a somewhat non-trivial task, since the ICNARC specification is episode centric, and the OMOP CDM is patient centric. This necessitated a number of opinionated design decisions, especially in places where inforamtion of a person’s hospital journey is lacking. These decisions may not work universally for all study designs.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p><code>{r, eval = FALSE} # install directly from github with remotes::install_github("cc-hic/icnarc2omop")</code></p>
</div>
<div id="prerequisites" class="section level2">
<h2 class="hasAnchor">
<a href="#prerequisites" class="anchor"></a>Prerequisites</h2>
<ul>
<li>A running target database that is <em>empty</em>. PostgreSQL and MySQL are currently supported.</li>
<li>
<code>R</code> (<code>R</code> is mandatory, R Studio is useful)</li>
<li>The ICNARC xmls you wish to convert</li>
<li>A text file describing the ETL process that generated the ICNARC files (for data provenance)</li>
<li>A download of the vocabuaries you would like to use from (Athena)[<a href="http://athena.ohdsi.org/" class="uri">http://athena.ohdsi.org/</a>]</li>
<li>A PC with at least 8Gb of memory (moving the OMOP vocabularies through memory is the main bottleneck). If this is a problem, please let me know and I will write a chunking function to mitigate this issue. You could also load the vocabularies yourself, and omit that functionality from the muncher.</li>
</ul>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>Before using this package, you will need to:</p>
<ol>
<li>Set up a new empty database (e.g. <code>CREATE DATABASE omop;</code>)</li>
<li>Create a project folder and populate it with the necessary files. They <em>MUST</em> follow this convention <em>EXACTLY</em>:</li>
</ol>
<pre><code>|--xml/
    |--icnarc01.xml &lt;- names must be unequviocal in order.
    |--icnarc02.xml
|--meta/
    |--src_desc.txt
|--vocab/
    |--CONCEPT_ANCESTOR.csv
    |--CONCEPT.csv
    |--CONCEPT_SYNONYM.csv
    |--DRUG_STRENGTH.csv
    |--VOCABULARY.csv
    |--CONCEPT_CLASS.csv
    |--CONCEPT_RELATIONSHIP.csv
    |--DOMAIN.csv
    |--RELATIONSHIP.csv</code></pre>
</div>
<div id="metadata-text-file-" class="section level2">
<h2 class="hasAnchor">
<a href="#metadata-text-file-" class="anchor"></a>Metadata text file.</h2>
<p>“src_desc.txt” must be placed in the <code>meta</code> folder. This file contains a description of the source data origin and purpose for collection. The description may contain a summary of the period of time that is expected to be covered by this dataset.</p>
</div>
<div id="omopification" class="section level2">
<h2 class="hasAnchor">
<a href="#omopification" class="anchor"></a>Omopification</h2>
<p>You can now run the muncher by calling:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(icnarc2omop)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw"><a href="reference/omopify_xml.html">omopify_xml</a></span>(</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">  <span class="dt">project_path =</span> <span class="st">"."</span>,</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  <span class="dt">nhs_trust =</span> <span class="st">"Demo St. Elsewhere"</span>,</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">  <span class="dt">cdm_version =</span> <span class="st">"5.3.1"</span>,</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">  <span class="dt">database_name =</span> <span class="st">"omop"</span>,</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">  <span class="dt">database_engine =</span> <span class="st">"postgres"</span>,</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">  <span class="dt">host_name =</span> <span class="st">"localhost"</span>,</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">  <span class="dt">port_no =</span> <span class="dv">5432</span>,</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">  <span class="dt">username =</span> <span class="st">"db username goes here"</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12">  )</a></code></pre></div>
<p>You will be asked for your password to connect to the database. If all goes well. You should now have a lovely barebones set up of OMOP. Enjoy these magical good times.</p>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/CC-HIC/icnarc2omop">https://​github.com/​CC-HIC/​icnarc2omop</a>
</li>
<li>Report a bug at <br><a href="https://github.com/CC-HIC/icnarc2omop/issues">https://​github.com/​CC-HIC/​icnarc2omop/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Edward Palmer <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-8024-4616" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle Status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Edward Palmer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
